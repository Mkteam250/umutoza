"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[876],{5495:(e,t,o)=>{o.d(t,{default:()=>c});var r=o(5155),a=o(2115),l=o(63),i=o(5125),n=o(5239),s=o(5704);let c=e=>{let{forceActive:t=!1}=e,[o,c]=(0,a.useState)([]),d=s.env.NEXT_PUBLIC_API_URL||"https://umutoza-umutoza.hf.space",p=(0,l.usePathname)(),u=(0,a.useCallback)(async e=>{try{await i.A.post("".concat(d,"/api/promotions/").concat(e,"/impression"))}catch(e){}},[d]),m=(0,a.useCallback)(e=>{c(t=>t.filter(t=>t.id!==e))},[]),h=(0,a.useCallback)((e,r)=>{let a=new Date(r).toISOString().split("T")[0],l=e.filter(e=>{if(t)return!0;if(e.startDate&&a<e.startDate||e.endDate&&a>e.endDate)return!1;let o=localStorage.getItem("promo_last_shown_".concat(e.id));if(o&&r-parseInt(o)<e.frequency*("hours"===e.frequencyUnit?36e5:"days"===e.frequencyUnit?864e5:6e4))return!1;return!0}),i=l.filter(e=>"popup"===e.type),n=l.filter(e=>"bottom"===e.type),s=[],d=i[0],p=n[0];d&&s.push(d),p&&s.push(p),s.forEach(e=>{!o.some(t=>t.id===e.id)&&(u(e.id),localStorage.setItem("promo_last_shown_".concat(e.id),r.toString()),"popup"===e.type&&e.displayDuration>0&&setTimeout(()=>{m(e.id)},1e3*e.displayDuration))}),o.map(e=>e.id).sort().join(",")!==s.map(e=>e.id).sort().join(",")&&c(s)},[o,t,m,u]),g=(0,a.useCallback)(async()=>{try{let e=(await i.A.get("".concat(d,"/api/promotions/public"))).data;if(e.length>0){e.sort((e,t)=>(t.priority||0)-(e.priority||0));let t=Date.now();h(e,t)}}catch(e){console.error("Error fetching promotions")}},[d,h]);(0,a.useEffect)(()=>{(async()=>{await g()})();let e=setInterval(g,3e4);return()=>clearInterval(e)},[g]),(0,a.useEffect)(()=>{o.some(e=>"bottom"===e.type)?document.body.style.paddingBottom="100px":document.body.style.paddingBottom="0px"},[o]);let x=async e=>{try{await i.A.post("".concat(d,"/api/promotions/").concat(e,"/click"))}catch(e){}};return p.includes("/admin")&&!t?null:(0,r.jsx)(r.Fragment,{children:o.map(e=>{if("popup"===e.type){let t={center:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","top-left":"top-4 left-4","top-right":"top-4 right-4","bottom-left":"bottom-4 left-4","bottom-right":"bottom-4 right-4"};return(0,r.jsx)("div",{className:"fixed z-[100] ".concat(t[e.position]||t.center," max-w-[90vw] w-full md:w-auto group touch-none"),children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden relative animate-bounce-in md:max-w-md w-full mx-auto outline outline-4 outline-indigo-500/20 transition-all duration-500 group-hover:md:max-w-2xl group-active:md:max-w-2xl group-hover:z-[110] group-active:z-[110]",children:[!1!==e.canClose&&(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),m(e.id)},className:"absolute top-2 right-2 bg-black/50 hover:bg-black text-white rounded-full w-8 h-8 flex items-center justify-center transition-colors z-10 backdrop-blur-sm",children:"✕"}),(0,r.jsx)("a",{href:e.linkUrl||"#",target:"_blank",rel:"noopener noreferrer",onClick:()=>x(e.id),className:"block",children:"video"===e.mediaType?(0,r.jsx)("video",{src:"".concat(d).concat(e.mediaUrl),autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full max-h-[60vh] md:max-h-[400px] object-cover transition-all duration-500 group-hover:max-h-[80vh] group-hover:object-contain bg-black"}):(0,r.jsx)(n.default,{src:"".concat(d).concat(e.mediaUrl),alt:e.name,width:800,height:450,className:"w-full max-h-[60vh] md:max-h-[400px] object-cover transition-all duration-500 group-hover:max-h-[80vh] group-hover:object-contain bg-gray-100",unoptimized:!0})}),!1!==e.showButton&&(0,r.jsx)("div",{className:"p-4 bg-gray-50 border-t border-gray-100",children:(0,r.jsxs)("a",{href:e.linkUrl||"#",target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-indigo-600 hover:bg-indigo-700 text-white text-center py-3 rounded-xl font-bold transition-all shadow-md group",children:[(0,r.jsx)("span",{className:"group-hover:mr-2 transition-all",children:e.ctaText||"Learn More"}),(0,r.jsx)("span",{className:"opacity-0 group-hover:opacity-100 transition-all",children:"→"})]})})]})},e.id)}return"bottom"===e.type?(0,r.jsx)("div",{className:"fixed bottom-0 left-0 w-full z-[100] animate-slide-up ".concat(t?"z-[120]":"z-[100]"," group"),children:(0,r.jsx)("div",{className:"bg-gradient-to-r from-slate-900 via-purple-900 to-slate-900 border-t-2 border-indigo-500 shadow-[0_-10px_40px_rgba(79,70,229,0.3)] transition-all duration-500 h-20 md:h-24 group-hover:h-72 md:group-hover:h-96 group-active:h-72 md:group-active:h-96",children:(0,r.jsxs)("div",{className:"max-w-screen-2xl mx-auto flex items-center justify-between h-full relative overflow-hidden transition-all duration-500",children:[e.fullMedia?(0,r.jsxs)("a",{href:e.linkUrl||"#",target:"_blank",rel:"noopener noreferrer",onClick:()=>x(e.id),className:"absolute inset-0 w-full h-full block group",children:["video"===e.mediaType?(0,r.jsx)("video",{src:"".concat(d).concat(e.mediaUrl),autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover group-hover:object-contain group-active:object-contain bg-black"}):(0,r.jsx)(n.default,{src:"".concat(d).concat(e.mediaUrl),alt:"Promo",fill:!0,className:"object-cover group-hover:object-contain group-active:object-contain transition-all duration-500 bg-black/40",unoptimized:!0}),(0,r.jsx)("div",{className:"absolute inset-0 bg-white/0 group-hover:bg-white/5 transition-colors"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 mix-blend-overlay"}),(0,r.jsx)("div",{className:"absolute top-0 left-1/4 w-32 h-full bg-white/5 skew-x-[-20deg] blur-xl animate-pulse"}),(0,r.jsxs)("a",{href:e.linkUrl||"#",target:"_blank",rel:"noopener noreferrer",onClick:()=>x(e.id),className:"flex items-center h-full flex-1 group pl-2 md:pl-0",children:[(0,r.jsx)("div",{className:"relative h-full aspect-[16/9] md:aspect-[3/1] shrink-0 mr-4 md:mr-6 overflow-hidden md:-skew-x-12 md:-ml-4 border-r-2 border-indigo-500/50 transition-all duration-500 group-hover:skew-x-0 group-hover:ml-0 group-hover:aspect-video group-hover:h-full group-hover:border-r-0 group-active:skew-x-0 group-active:ml-0 group-active:aspect-video group-active:h-full group-active:border-r-0",children:"video"===e.mediaType?(0,r.jsx)("video",{src:"".concat(d).concat(e.mediaUrl),autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover md:skew-x-12 md:scale-110 group-hover:skew-x-0 group-hover:scale-100 group-hover:object-contain group-active:skew-x-0 group-active:scale-100 group-active:object-contain bg-black"}):(0,r.jsx)(n.default,{src:"".concat(d).concat(e.mediaUrl),alt:"Promo",fill:!0,className:"object-cover md:skew-x-12 md:scale-110 group-hover:skew-x-0 group-hover:scale-100 group-hover:object-contain group-active:skew-x-0 group-active:scale-100 group-active:object-contain transition-all duration-700 bg-black/40",unoptimized:!0})}),(0,r.jsxs)("div",{className:"z-10 py-2 pr-2",children:[(0,r.jsx)("h3",{className:"font-black text-white text-base md:text-2xl italic tracking-wider uppercase drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)]",children:(0,r.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-yellow-500",children:e.name})}),(0,r.jsx)("p",{className:"text-xs md:text-sm text-indigo-200 font-bold tracking-wide line-clamp-1 uppercase",children:"Limited Time Offer • Don't Miss Out!"})]})]}),(0,r.jsxs)("div",{className:"flex items-center h-full pr-4 md:pr-8 space-x-4 z-20",children:[!1!==e.showButton&&(0,r.jsx)("a",{href:e.linkUrl||"#",target:"_blank",rel:"noopener noreferrer",onClick:()=>x(e.id),className:"hidden md:flex items-center justify-center px-8 py-3 bg-gradient-to-r from-yellow-400 to-yellow-600 hover:from-yellow-300 hover:to-yellow-500 text-slate-900 font-black text-lg uppercase italic tracking-widest -skew-x-12 border-2 border-yellow-200 shadow-[0_0_15px_rgba(234,179,8,0.6)] transform hover:scale-105 transition-all outline outline-1 outline-yellow-200",children:(0,r.jsx)("span",{className:"skew-x-12",children:e.ctaText||"PLAY NOW"})}),!1!==e.showButton&&(0,r.jsx)("a",{href:e.linkUrl||"#",target:"_blank",rel:"noopener noreferrer",onClick:()=>x(e.id),className:"md:hidden flex px-4 py-2 bg-yellow-500 text-slate-900 font-black text-xs uppercase rounded hover:bg-yellow-400 shadow-lg",children:e.ctaText?e.ctaText.length>5?"GET":e.ctaText:"GET"})]})]}),(0,r.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 z-[40]",children:!1!==e.canClose&&(0,r.jsx)("button",{onClick:()=>m(e.id),className:"w-8 h-8 flex items-center justify-center rounded-md transition-all backdrop-blur-sm shadow-lg ".concat(e.fullMedia?"bg-black/40 text-white hover:bg-red-600/80 border border-white/20":"bg-slate-800/50 text-slate-400 hover:text-white border border-slate-700 hover:border-red-500"),children:(0,r.jsx)("span",{className:"text-xl font-bold leading-none mb-1",children:"\xd7"})})})]})})},e.id):null})})}}}]);