"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[515],{8515:(e,t,a)=>{a.d(t,{A:()=>o});var i=a(5155),s=a(2115),l=a(63),r=a(5125),n=a(5239);let o=e=>{let{isEmbedded:t=!1}=e,[a,o]=(0,s.useState)([]),[d,c]=(0,s.useState)(!0),[x,u]=(0,s.useState)(!1),[b,g]=(0,s.useState)(""),[m,p]=(0,s.useState)("list"),[h,f]=(0,s.useState)(null),[k,w]=(0,s.useState)({questionText:"",options:["","","",""],correctAnswerIndex:0,difficulty:"Medium",image:null}),j="https://umutoza-umutoza.hf.space",y=localStorage.getItem("adminToken"),v=(0,l.useRouter)(),N=(0,s.useCallback)(async()=>{c(!0);try{let e=await r.A.get("".concat(j,"/api/admin/quiz"));o(e.data),g("")}catch(e){console.error("Error fetching questions:",e),g("Ntitubashije kubona ibibazo.")}finally{c(!1)}},[j]);(0,s.useEffect)(()=>{if(!y&&!t)return void v.push("/admin/login");(async()=>{await N()})()},[y,t,v,N]);let z=e=>{let{name:t,value:a}=e.target;w(e=>({...e,[t]:a}))},I=()=>{w({questionText:"",options:["","","",""],correctAnswerIndex:0,difficulty:"Medium",image:null}),f(null),g("")},A=async e=>{e.preventDefault(),u(!0),g("");let t=new FormData;t.append("questionText",k.questionText),t.append("options",JSON.stringify(k.options)),t.append("correctAnswerIndex",k.correctAnswerIndex),t.append("difficulty",k.difficulty),k.image&&t.append("image",k.image);try{let e=h?"".concat(j,"/api/admin/quiz/").concat(h):"".concat(j,"/api/admin/quiz"),a=h?"put":"post";await (0,r.A)({method:a,url:e,data:t,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(y)}}),I(),p("list"),N()}catch(e){console.error("Error saving question:",e),g("Ntitubashije kubika ikibazo. Ongera ugerageze.")}finally{u(!1)}},C=async e=>{if(window.confirm("Ese wizeye ko ushaka gusiba iki kibazo?"))try{await r.A.delete("".concat(j,"/api/admin/quiz/").concat(e),{headers:{Authorization:"Bearer ".concat(y)}}),N()}catch(e){console.error("Error deleting question:",e),g("Ntitubashije gusiba ikibazo.")}};return d&&"list"===m?(0,i.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):(0,i.jsx)("div",{className:"max-w-6xl mx-auto p-4 md:p-8",children:(0,i.jsxs)("div",{className:"bg-white rounded-[32px] shadow-2xl overflow-hidden border border-slate-100",children:[(0,i.jsxs)("div",{className:"bg-slate-900 p-8 text-white flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-black",children:"Gucunga Ibibazo"}),(0,i.jsx)("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest mt-1",children:"Imyitozo y'Amategeko y'Umuhanda"})]}),!t&&(0,i.jsx)("button",{onClick:()=>{localStorage.removeItem("adminToken"),v.push("/admin/login")},className:"px-6 py-2 bg-white/10 hover:bg-white/20 rounded-xl font-bold transition-all text-sm",children:"Gusohoka"})]}),(0,i.jsxs)("div",{className:"p-8",children:[b&&(0,i.jsx)("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-700 font-bold rounded-r-xl",children:b}),"list"===m?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-10 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-3xl font-black text-slate-900",children:"Ubugenzuzi bw'Ibibazo"}),(0,i.jsxs)("p",{className:"text-slate-400 text-sm mt-1 font-bold",children:["Hamaze kuboneka ibibazo ",a.length," mu kigega."]})]}),(0,i.jsx)("button",{onClick:()=>{I(),p("create")},className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-black text-sm uppercase tracking-widest shadow-xl shadow-indigo-200 hover:scale-105 active:scale-95 transition-all",children:"+ Akandi Kibazo"})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>(0,i.jsxs)("div",{className:"group bg-slate-50 rounded-3xl p-6 border border-slate-100 hover:bg-white hover:shadow-2xl transition-all duration-300 flex flex-col h-full",children:[(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsx)("span",{className:"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-tighter ".concat("Easy"===e.difficulty?"bg-green-100 text-green-700":"Hard"===e.difficulty?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"),children:e.difficulty})}),(0,i.jsx)("h3",{className:"text-slate-800 font-bold text-lg mb-6 line-clamp-3 leading-snug",children:e.questionText}),e.imageUrl&&(0,i.jsx)("div",{className:"mb-6 rounded-2xl overflow-hidden aspect-video relative",children:(0,i.jsx)(n.default,{src:"".concat(j).concat(e.imageUrl),alt:"Question",fill:!0,className:"object-cover",unoptimized:!0})}),(0,i.jsxs)("div",{className:"mt-auto pt-6 border-t border-slate-200 flex justify-between gap-3",children:[(0,i.jsx)("button",{onClick:()=>(e=>{w({questionText:e.questionText,options:e.options||["","","",""],correctAnswerIndex:e.correctAnswerIndex,difficulty:e.difficulty,image:null}),f(e.id),p("edit")})(e),className:"flex-1 py-3 bg-white text-indigo-600 border-2 border-indigo-100 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-indigo-600 hover:text-white hover:border-indigo-600 transition-all",children:"Guhindura"}),(0,i.jsx)("button",{onClick:()=>C(e.id),className:"px-4 py-3 bg-white text-red-500 border-2 border-red-50 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-red-500 hover:text-white hover:border-red-500 transition-all",children:"\uD83D\uDDD1️"})]})]},e.id))})]}):(0,i.jsxs)("form",{onSubmit:A,className:"max-w-3xl mx-auto",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-10",children:[(0,i.jsx)("h2",{className:"text-3xl font-black text-slate-900",children:h?"Hindura Ikibazo":"Ongeramo Ikibazo"}),(0,i.jsx)("button",{type:"button",onClick:()=>p("list"),className:"text-slate-400 font-bold hover:text-slate-600 transition-colors",children:"Funga"})]}),(0,i.jsxs)("div",{className:"space-y-8",children:[(0,i.jsxs)("section",{className:"space-y-3",children:[(0,i.jsx)("label",{className:"block text-sm font-black text-slate-400 uppercase tracking-widest",children:"Imyandiko y'ikibazo"}),(0,i.jsx)("textarea",{name:"questionText",value:k.questionText,onChange:z,className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl font-bold text-slate-700 focus:border-indigo-500 outline-none transition-all min-h-[120px]",placeholder:"Andika ikibazo hano...",required:!0})]}),(0,i.jsxs)("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("label",{className:"block text-sm font-black text-slate-400 uppercase tracking-widest",children:"Urwego (Difficulty)"}),(0,i.jsxs)("select",{name:"difficulty",value:k.difficulty,onChange:z,className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl font-bold text-slate-700 focus:border-indigo-500 outline-none transition-all appearance-none cursor-pointer",children:[(0,i.jsx)("option",{value:"Easy",children:"Easy"}),(0,i.jsx)("option",{value:"Medium",children:"Medium"}),(0,i.jsx)("option",{value:"Hard",children:"Hard"})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("label",{className:"block text-sm font-black text-slate-400 uppercase tracking-widest",children:"Ifoto (Optional)"}),(0,i.jsx)("input",{type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&w(t=>({...t,image:e.target.files[0]}))},className:"w-full px-4 py-3 bg-slate-50 border-2 border-slate-100 rounded-2xl font-bold text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-black file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",accept:"image/*"})]})]}),(0,i.jsxs)("section",{className:"space-y-6",children:[(0,i.jsx)("label",{className:"block text-sm font-black text-slate-400 uppercase tracking-widest",children:"Ibisubizo bishoboka"}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.options.map((e,t)=>(0,i.jsxs)("div",{className:"relative group transition-all",children:[(0,i.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-8 h-8 rounded-full flex items-center justify-center font-black text-xs border-2 transition-all ".concat(k.correctAnswerIndex===t?"bg-indigo-600 border-indigo-600 text-white":"bg-white border-slate-200 text-slate-400"),children:String.fromCharCode(65+t)}),(0,i.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{let a=[...k.options];a[e]=t,w(e=>({...e,options:a}))})(t,e.target.value),className:"w-full pl-16 pr-12 py-4 bg-slate-50 border-2 rounded-2xl font-bold text-slate-700 outline-none transition-all ".concat(k.correctAnswerIndex===t?"border-indigo-500 bg-white shadow-lg":"border-slate-100 focus:border-slate-300"),placeholder:"Igisubizo ".concat(String.fromCharCode(65+t)),required:t<2}),(0,i.jsx)("button",{type:"button",onClick:()=>w(e=>({...e,correctAnswerIndex:t})),className:"absolute right-4 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full border-2 transition-all ".concat(k.correctAnswerIndex===t?"bg-indigo-500 border-indigo-500":"border-slate-200"),children:k.correctAnswerIndex===t&&(0,i.jsx)("span",{className:"text-white text-[10px]",children:"✓"})})]},t))}),(0,i.jsx)("p",{className:"text-xs text-slate-400 font-bold italic",children:"Kanda kuri kariya gakomane k'iburyo kugira ngo ugaragaze igisubizo cy'ukuri."})]}),(0,i.jsxs)("div",{className:"pt-10 flex flex-col md:flex-row gap-4",children:[(0,i.jsx)("button",{type:"submit",disabled:x,className:"flex-[2] py-5 bg-indigo-600 text-white rounded-[25px] font-black text-lg uppercase tracking-widest shadow-2xl shadow-indigo-200 hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50",children:x?"Bikaba bikwa...":h?"Bika impinduka":"Launch Question"}),(0,i.jsx)("button",{type:"button",onClick:()=>p("list"),className:"flex-1 py-5 bg-slate-100 text-slate-500 rounded-[25px] font-black text-lg uppercase tracking-widest hover:bg-slate-200 transition-all",children:"Reka"})]})]})]})]})]})})}}}]);